## 1. Linux基础

### 1.1 文件和目录

Linux系统中的所有文件都存放在根目录下，以.开头的文件为隐藏文件

#### 1.1.1 目录

- / :根目录
- /home:所有普通用户的家目录，普通用户的操作范围仅限在自己的家目录
- /root : Linux系统超级管理员的家目录
- /usr/bin: Linux命令大部分都存在于该目录下

#### 1.1.2 路径

- 绝对路径：路径源头固定不变：/ :根目录； ~:当前用户的家目录
- 相对路径：当前所在路径为源头：./当前路径； ../上一级路径

### 1.2 命令

- 命令主体 [-命令选项1命令选项2] [命令参数]

  命令主体和选项之间必须包含一个空格；命令选项的作用一般是用来扩展命令主体功能的

- 查看命令帮助信息

  - 命令主体 --help：可以查看命令具备哪些选项及选项含义
  - man 命令主体：查看命令的手册信息

### 1.3 通配符

*：匹配任意长度的文件名； ？：匹配单个字符； []：括号内的内容表示一个范围

### 1.4 快捷键

空格键：向下翻页、 b：向上翻页、q：退出分屏、上下键：快速调出历史命令、tab键自动补齐；
退出命令：Ctrl + c、退出终端：exit

## 2. 文件和目录操作

### 2.1 路径操作

- 查看当前路径：pwd

- 切换路径：cd 路径

- 查看当前路径下的文件和文件夹

  ls -a：显示所有文件，包含隐藏文件、l：以列表形式显示文件详细信息

### 2.2 创建

- 创建文件：touch 文件1 [文件2]
- 创建文件夹：mkdir 文件夹1 [文件夹2]（也可使用/创建多级目录）

### 2.3 复制

- 复制文件并提示是否覆盖：cp -i 文件1 [文件2] 目标路径
- 复制文件夹：cp -r 目录1 目录2
- 远程复制文件：scp -r win路径 linux路径（用户@IP：路径）

### 2.4 移动文件/文件夹

- mv 文件名/文件夹名 目录路径 
- 重命名 mv 文件名1 文件名2（要在同一目录下） 

### 2.5 删除

- 删除文件 rm 文件名
- 删除文件夹 rm -r 文件夹名

### 2.6 查找文件

- find路径 -name '目标文件名'，文件名可使用通配符，可在其后加上-exec 命令 

### 2.7 链接文件

- 软连接：ln -s 源文件/文件夹路径 链接文件名

- 硬连接：ln 源文件 目标文件

- 软连接与硬链接的区别

  1）软链接使用文件路径名作为指针。所以删除连接文件对源文件无影响，但是删除源文件，连接文件就会找不到要指向的文件。

  2）硬连接不管有多少个，都指向的是同一个I节点，会把结点连接数增加 ，只要结点的连接数不是 0，文件就一直存在，不管删除的是源文件还是 连接的文件，只要有一个存在，文件就存在

  3）软连接可以对目录进行连接，硬连接不可以

## 3. 文件内容操作

### 3.1 查看文件内容

- cat 文件名

  追加内容：cat 文件1 >> 文件2； 合并文件：cat 文件1 文件2 > 文件3

- more 文件名：分屏查看，Ctrl+f 向下滚动、Ctrl+b 返回上一屏

- head -n 文件名：前n行

- tail -n 文件名：后n行

  tail -f 日志文件名：动态查看日志内容

查看指定时间段日志：sed -n '/2021-09-17 10:00:00/,/2021-09-18 10:00:00/p' 日志文件名
将所有‘old’以‘new’代替：sed -i 's/old/new/g' 文件名；vi里：:%s/old/new/g
统计字符在文件中出现次数：grep -o 's1|s2' 文件名 | wc -l
统计目录中文件数量：ls -l | grep '^-' | wc -l

### 3.2 查找内容

- grep 需查找内容 文件名 
- 命令 | grep 需查找内容
  统计字符在文件中出现次数：grep -o 's1|s2' 文件名 | wc -l
  统计目录中文件数量：ls -l | grep '^-' | wc -l 

### 3.3 比较文件的差异

- diff 文件1 文件2 ：以逐行的方式，比较文本文件的异同处。
- cmp 文件1 文件2 ：标示出第一个不同之处的字符和列数编号。

### 3.4 文件权限操作

- chmod 数字1数字2数字3 文件名
  r4 w2 x1 -0：数字1,2,3分别对应 拥有者，用户组，其他人 
- umask -s 文件名：以rwx形式显示文件缺省权限 

## 4. 系统，进程，网络，磁盘，用户

### 4.1 系统

- 重启 reboot；关机 shutdown -h now
- 查看程序安装位置：which 程序名
- 开启，关闭，重启服务：service 服务名 start/stop/restart
- 远程登录：ssh 用户@IP
- 监控系统资源：top -o %CPU、top -o %MEM
- 系统磁盘使用量：df [-ahikHTm] [目录或文件名]

### 4.2 进程

- 查看进程信息：

  ps -aux | grep PID
  lsof -i:端口号（占用某一端口的进程ID）

- 杀死进程：kill -9 PID

### 4.3 网络及端口号

- 查看端口号：netstat -anptu| grep8080
- 查看设备网络信息：ifconfig、route
- 测试网络连通性：ping

### 4.4 用户

- 用户切换 su -用户名

- 查看用户名称

  whoami、id -un：自身用户名称、id -gn：组名称

## 5. 压缩与解压

### 5.1 tar和gzip/bzip

- 打包和压缩：

  tar -zcvf 压缩包名.tar.gz 目标文件/文件夹

  tar -jcvf 压缩包名.tar.bz 目标文件/文件夹

- 解包和解压：

  tar -zxvf 压缩包名.tar.gz -C 解压位置文件夹

  tar -jxvf 压缩包名.tar.bz -C 解压位置文件夹

### 5.2 zip和unzip

- zip -r 压缩包名.zip 目标文件/文件夹 
- unzip -d 解压位置文件夹 压缩包名.zip 

## 6. Vi编辑器

### 6.1 三种模式

vi 新文件名/已有文件名 ->命令模式
i->插入模式，可输入内容
：->末行模式：wq存盘退出，w存盘，q!不保存退出

### 6.2 扩展命令

##### 命令模式

- 移动光标

  gg：光标移动文件开头、G：光标移动到文件末尾、数字 G：移动到指定行

- 删除命令

  X：删除光标前一个字符，相当于backspace、dd：删除光标所在行

- 撤销命令

  u：一步一步撤销、Ctr-r：反撤销

- 复制粘贴

  yy：复制当前行、nyy：复制n行、p：在光标所在位置向下新开辟一行粘贴

- 查找命令

  /str：查找，n下一个、N上一个

##### 插入模式

- i：光标当前位置插入 I：插入行首 
- a：光标后插入 A：光标所在行行尾插入 
- o：光标所在行下开启新行

## 7.排序，去重

sort uniq

## 8.用Linux命令找出出现最多的三个ip地址

cat test.log|awk -F" " '{print $2}'|sort|uniq -c|sort -nrk 1 -t' '|awk -F" " '{print $2}'|head -10

问题剖析：

1.cat *.log将文本内容打印到屏幕

2.使用awk命令可以按照分割符将一行分割为多个列，第一列用$1表示，第二列用$2表示，依次类推

  awk -F" " '{print $2}   //表示用空格作为分隔符进行分割，打印出第2列

3.sort 进行排序，默认是按照ascii码进行排序的

4.uniq -c 统计相邻的行的重复数量，结果是类似 3 127.13.13.13,前面的数字代码重复的行数

 sort|uniq -c  //统计重复的行数

5.sort -n是按照数值进行由小到大进行排序， -r是表示逆序，-t是指定分割符，-k是执行按照第几列进行排序

sort -nrk 1 -t' '

6.使用awk命令可以按照分割符将一行分割为多个列，第一列用$1表示，第二列用$2表示，依次类推

awk -F" " '{print $2}'  //表示用空格作为分隔符进行分割，打印出第2列

7.head -n表示取前n个

head -10